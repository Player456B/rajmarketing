<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Customer Dashboard | Raj Marketing Mysore</title>
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css?family=Poppins:400,600,700&display=swap" rel="stylesheet"/>
  <link rel="icon" href="../images/logo.svg">
  <style>
    :root {
      --primary: #0e2a47;
      --secondary: #3bb4f2;
      --dark-yellow: #ffd600;
      --gold: #ffd700;
      --silver: #d0d0d0;
      --bronze: #b08d57;
      --white: #fff;
    }
    body {
      background: var(--primary);
      color: var(--white);
      font-family: 'Poppins', sans-serif;
      margin: 0;
    }
    .topbar {
      display: flex;
      align-items: center;
      padding: 1em 1.2em 0 1.2em;
    }
    .menu-btn {
      font-size: 2em;
      background: none;
      border: none;
      color: var(--dark-yellow);
      cursor: pointer;
      margin-right: 1em;
    }
    .brand-title {
      color: var(--dark-yellow);
      font-weight: 700;
      font-size: 1.18em;
      letter-spacing: 1px;
    }
    .main-content {
      display: flex;
      flex-wrap: wrap;
      align-items: flex-start;
      gap: 1.5em;
      margin: 1em auto 0 auto;
      max-width: 1150px;
      min-height: 200px;
      padding: 0 1em;
    }
    .profile-side {
      flex: 1 1 180px;
      max-width: 230px;
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      margin-top: 0.5em;
    }
    .profile-photo-box {
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      position: relative;
      margin-bottom: 1.1em;
    }
    .profile-pic {
      width: 110px;
      height: 110px;
      border-radius: 50%;
      border: 3px solid var(--secondary);
      background: #eaf6fc;
      object-fit: cover;
      margin-bottom: 0.5em;
      box-shadow: 0 2px 14px #0003;
    }
    .upload-btn {
      margin-top: 0.13em;
      background: var(--secondary);
      color: #fff;
      border: none;
      padding: 0.4em 1.1em;
      border-radius: 8px;
      font-size: 0.97em;
      cursor:pointer;
      box-shadow: 0 2px 8px #0002;
    }
    .profile-details {
      flex: 3 1 400px;
      background: #18345a;
      margin-left: 0;
      margin-top: 0.2em;
      border-radius: 13px;
      padding: 1em 1.5em;
      box-shadow: 0 2px 18px #0002;
      min-width: 220px;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      position: relative;
    }
    .c-name {
      color: var(--dark-yellow);
      font-weight: 700;
      font-size: 1.4em;
      margin-bottom: .15em;
      letter-spacing: 0.5px;
      text-shadow: 0 2px 12px #0006;
    }
    .c-info-label {
      color: var(--secondary);
      font-weight: 700;
      font-size: 1em;
      margin-top:0.7em;
      margin-bottom: 0.17em;
    }
    .c-info {
      color: #cbe7fa;
      font-size: 1em;
      margin-bottom: 0.23em;
      word-break: break-all;
    }
    .c-id {
      color: var(--secondary);
      font-weight: 600;
      margin-top: 0.5em;
      font-size: 1.09em;
      letter-spacing: 0.4px;
    }
    .cover-swatches { margin-top:1.2em; display: flex; gap: 6px;}
    .swatch {
      width: 25px; height: 25px; border-radius: 7px; border: 2px solid #fff;
      cursor: pointer; box-shadow: 0 2px 10px #0002;
      outline: none;
    }
    .swatch.selected { border: 3px solid var(--dark-yellow);}
    /* Side Menu */
    #side-menu {
      position: fixed;
      left: -260px;
      top: 0;
      width: 250px;
      height: 100vh;
      background: #18345a;
      box-shadow: 2px 0 18px #0008;
      z-index: 9999;
      transition: left 0.28s;
      padding-top: 1.7em;
    }
    #side-menu.active { left: 0;}
    #side-menu-backdrop {
      display: none;
    }
    #side-menu-backdrop.active {
      display: block;
      position:fixed; left:0;top:0;width:100vw;height:100vh;z-index:9998;background:rgba(0,0,0,0.16);
    }
    .side-menu-header { padding: 0.4em 1em 1em 1.2em; color: var(--dark-yellow); font-weight:700; font-size:1.14em;}
    .side-menu ul { list-style: none; padding: 0 1.1em;}
    .side-menu li { margin: 1em 0;}
    .side-menu a { color: var(--white); font-size: 1.04em; display: flex; align-items: center; gap: 10px; font-weight: 600;}
    .side-menu hr {margin: .6em 0; opacity:0.24;}
    /* Slider */
    .slider-section {background: var(--primary); margin: 1.3em 0;}
    .slider {display: flex;overflow-x: auto;scroll-behavior: smooth;gap: 1em;padding: 1em 0.5em;}
    .slide {
      background: #18345a;
      border-radius: 13px;
      min-width: 235px; max-width: 250px;
      margin-right: 0.6em; padding: 1em 1em;
      display: flex; align-items: center; gap: 1em;
      box-shadow: 0 2px 16px rgba(50,40,100,0.15);
      color: #fff;
      font-size: 1.01em;
      font-weight: 500;
    }
    .promo-icon { font-size: 2em; margin-right: 0.3em; display:inline-block; width:48px; text-align:center;}
    .promo-title { font-weight: 700; color: var(--dark-yellow); font-size: 1.05em;}
    .promo-desc { font-size: 0.97em; color: #cbe7fa;}
    /* Premium cards */
    .member-cards {
      display: flex;
      gap: 1em;
      justify-content: center;
      margin: 2.1em 0 1em 0;
    }
    .m-card {
      min-width: 160px;
      background: #292929;
      border-radius: 14px;
      padding: 1.3em 1em;
      color: #fff;
      text-align: center;
      box-shadow: 0 2px 14px #0003;
      cursor: pointer;
      font-size: 1.14em;
      transition: transform .32s, box-shadow .16s;
      position: relative;
      overflow: hidden;
    }
    .m-card.gold { background: linear-gradient(120deg,#ffd700,#ffeb66); color: #925900;}
    .m-card.silver { background: linear-gradient(120deg,#d0d0d0,#fff); color: #385777;}
    .m-card.bronze { background: linear-gradient(120deg,#b08d57,#ffe7b2); color: #613c07;}
    .m-card.animated { transform: scale(1.12) rotate(-1deg); box-shadow:0 6px 22px #0005;}
    .m-card .m-title { font-weight: 700; font-size:1.2em;}
    .m-card .m-price { font-size:1.1em; font-weight:600;}
    .m-card .m-desc { font-size:0.97em; margin-top:0.7em;}
    /* Lower menu static */
    .lower-menu {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: #112945;
      border-radius: 18px 18px 0 0;
      margin: 2.2em auto 0 auto;
      max-width: 660px;
      padding: 0.6em 0.2em;
      box-shadow: 0 -2px 12px #0003;
    }
    .lower-menu a {
      flex: 1;
      text-align: center;
      color: var(--white);
      font-size: 1.08em;
      padding: 0.6em 0;
      border: none;
      background: none;
      font-weight: 600;
      transition: background .16s, color .16s;
      border-radius: 12px;
      margin: 0 1px;
      cursor: pointer;
    }
    .lower-menu a:hover,
    .lower-menu a.active {
      background: var(--secondary);
      color: var(--primary);
    }
    /* Order Now form modal */
    .modal-bg {
      display: none;
      position: fixed;
      top:0; left:0; width:100vw; height:100vh;
      background: #0007;
      z-index: 10000;
      align-items: center;
      justify-content: center;
    }
    .modal-bg.active { display: flex;}
    .modal-box {
      background: #18345a;
      border-radius: 14px;
      padding: 2em 1.1em 1.2em 1.1em;
      min-width: 300px;
      max-width: 95vw;
      box-shadow: 0 3px 24px #0006;
      color: #fff;
      position: relative;
    }
    .modal-box label { color: var(--dark-yellow); font-weight: 600; }
    .modal-box select, .modal-box input {
      width: 100%; margin-top:0.3em; margin-bottom:1em;
      border-radius: 7px; border: none; padding: 0.7em; font-size: 1.08em; color: #18345a;
    }
    .modal-box button {
      background: var(--secondary); color: #fff;
      border: none; border-radius: 8px;
      font-weight: 700; font-size: 1.09em;
      padding: 0.6em 1.6em; margin-top: 1.1em; cursor: pointer; width:100%;
    }
    .close-btn {
      position: absolute; right: 8px; top: 8px;
      background: var(--dark-yellow); border: none; border-radius: 12px;
      width: 28px; height: 28px; font-size: 1.12em; cursor: pointer; color: #18345a;
    }
    .modal-success {
      color: #29f98f;
      margin-top: 1em;
      font-weight: 600;
      text-align: center;
      font-size: 1.13em;
    }
    .modal-gold { color: var(--gold); font-weight: bold;}
    .modal-silver { color: var(--secondary); font-weight: bold;}
    .modal-error { color: #ffb542;}
    /* Responsive */
    @media (max-width: 900px) {
      .main-content {flex-direction: column; align-items: stretch;}
      .profile-side, .profile-details {align-items: flex-start;}
      .profile-side {align-items: flex-end;}
    }
    @media (max-width: 600px) {
      .profile-details { padding: 1em 0.7em;}
      .main-content {padding: 0 0.4em;}
      .lower-menu {max-width: 99vw;}
      .member-cards { flex-direction: column; align-items:center;}
      .slider .slide {min-width: 78vw; max-width: 90vw;}
    }
    /* Footer */
    footer {
      background: #0e233a;
      text-align: center;
      padding: 1.2em 0 0.7em 0;
      font-size: 0.93em;
      color: #e3e3e3;
      border-radius: 14px 14px 0 0;
      margin-top: 2em;
    }
    footer a { color: var(--dark-yellow);}
  </style>
</head>
<body>
  <!-- Side Menu -->
  <nav id="side-menu" class="side-menu">
    <div class="side-menu-header">Menu</div>
    <ul>
      <li><a href="#" onclick="openPage('order')">🛒 Order Now</a></li>
      <li><a href="#" onclick="openPage('price')">💵 Price Check</a></li>
      <li><a href="#" onclick="openPage('myorder')">📄 My Order</a></li>
      <li><a href="#" onclick="openPage('payment')">💳 Payment</a></li>
      <li><a href="#" onclick="openPage('orderstatus')">🚚 Order Status</a></li>
      <hr>
      <li><a href="login.html" onclick="logout()">🚪 Logout</a></li>
    </ul>
  </nav>
  <div id="side-menu-backdrop"></div>
  <div class="topbar">
    <button class="menu-btn" id="menu-btn">&#9776;</button>
    <span class="brand-title">Raj Marketing</span>
  </div>

  <div class="main-content">
    <div class="profile-side">
      <div class="profile-photo-box">
        <img src="../images/default-profile.png" id="profilePic" class="profile-pic" alt="Profile Photo">
        <input type="file" id="profileUpload" accept="image/*" style="display:none">
        <button class="upload-btn" onclick="document.getElementById('profileUpload').click()">Upload</button>
        <div class="cover-swatches" id="coverSwatches"></div>
      </div>
    </div>
    <div class="profile-details">
      <div class="c-name" id="cName"></div>
      <div class="c-info-label">Contact</div>
      <div class="c-info" id="cPhone"></div>
      <div class="c-info-label">Email</div>
      <div class="c-info" id="cEmail"></div>
      <div class="c-info-label">Join Date</div>
      <div class="c-info" id="cJoin"></div>
      <div class="c-id" id="cID"></div>
    </div>
  </div>

  <!-- Promotion Slider -->
  <section class="slider-section">
    <div class="slider shadow" id="promo-slider">
      <div class="slide"><span class="promo-icon">💰</span><div><div class="promo-title">Best Price!</div><div class="promo-desc">Unbeatable deals for every home</div></div></div>
      <div class="slide"><span class="promo-icon">⚡</span><div><div class="promo-title">Quick Install</div><div class="promo-desc">Fast, hassle-free service</div></div></div>
      <div class="slide"><span class="promo-icon">🛡️</span><div><div class="promo-title">Safe & Durable</div><div class="promo-desc">Premium quality, lasting protection</div></div></div>
      <div class="slide"><span class="promo-icon">✂️</span><div><div class="promo-title">Custom Size</div><div class="promo-desc">Perfect fit for every window & door</div></div></div>
      <div class="slide"><span class="promo-icon">🏆</span><div><div class="promo-title">Top Rated</div><div class="promo-desc">Hundreds of happy customers</div></div></div>
      <div class="slide"><span class="promo-icon">🚚</span><div><div class="promo-title">Free Delivery</div><div class="promo-desc">Across Mysore city limits</div></div></div>
      <div class="slide"><span class="promo-icon">📞</span><div><div class="promo-title">Support 24/7</div><div class="promo-desc">Always here for you</div></div></div>
      <div class="slide"><span class="promo-icon">🔒</span><div><div class="promo-title">Secure</div><div class="promo-desc">Child & pet friendly mesh</div></div></div>
      <div class="slide"><span class="promo-icon">☎️</span><div><div class="promo-title">Call Now</div><div class="promo-desc">(+91) 9483037385 </div></div></div>
    </div>
  </section>

  <!-- Premium Cards -->
  <div class="member-cards">
    <div class="m-card gold" id="goldCard" onclick="showPayment('gold')">
      <div class="m-title">🥇 Gold</div>
      <div class="m-price">₹1000</div>
      <div class="m-desc">VIP benefits, free annual service, highest referral bonus</div>
    </div>
    <div class="m-card silver" id="silverCard" onclick="showPayment('silver')">
      <div class="m-title">🥈 Silver</div>
      <div class="m-price">₹500</div>
      <div class="m-desc">Standard member, discounted service, referral rewards</div>
    </div>
    <div class="m-card bronze" id="bronzeCard" onclick="showPayment('bronze')">
      <div class="m-title">🥉 Bronze</div>
      <div class="m-price">₹250</div>
      <div class="m-desc">Basic access, member-only offers, loyalty points</div>
    </div>
  </div>

  <!-- Lower menu static -->
  <nav class="lower-menu shadow">
    <a href="#" onclick="openPage('order')">🛒 Order Now</a>
    <a href="#" onclick="openPage('price')">💵 Price Check</a>
    <a href="#" onclick="openPage('myorder')">📄 My Order</a>
    <a href="#" onclick="openPage('payment')">💳 Payment</a>
    <a href="#" onclick="openPage('orderstatus')">🚚 Order Status</a>
  </nav>

  <!-- Modal Order Now -->
  <div id="modal-bg" class="modal-bg">
    <div class="modal-box" id="modalBox"></div>
    <button class="close-btn" onclick="closeModal()">✖️</button>
  </div>

  <!-- Footer -->
  <footer>
    <div>
      &copy; 2025 Raj Marketing Mysore. All Rights Reserved.<br>
      Contact: <a href="tel:+919483037385">+91-9483037385</a> <br>
      <span>📍 Arvind Nagar, Mysore, India</span>
    </div>
  </footer>
<script>
/* --------- Customer Data ----------- */
const gradients = [
  "linear-gradient(120deg,#0e2a47,#3bb4f2)",
  "linear-gradient(120deg,#ffd600,#ffd700)",
  "linear-gradient(120deg,#b08d57,#ffd700)",
  "linear-gradient(120deg,#3bb4f2,#fff)",
  "linear-gradient(120deg,#0e2a47,#ffd600)",
  "linear-gradient(120deg,#d0d0d0,#18345a)",
  "linear-gradient(120deg,#18345a,#3bb4f2)"
];
const swatchEl = document.getElementById('coverSwatches');
gradients.forEach((g, i)=>{
  const s = document.createElement('div');
  s.className = 'swatch';
  s.style.background = gradients[i];
  s.onclick = ()=>setCover(i);
  swatchEl.appendChild(s);
});
function setCover(i){
  user.cover = i;
  document.body.style.background = gradients[i];
  updateSwatch();
  saveUser();
}
function updateSwatch() {
  swatchEl.querySelectorAll('.swatch').forEach((sw,idx)=>{
    sw.classList.toggle('selected', idx===user.cover);
  });
}
let users = JSON.parse(localStorage.getItem('raj_users')||'[]');
let phone = localStorage.getItem('raj_loggedin');
let user = users.find(u=>u.phone===phone);
if(!user){ window.location.href="login.html"; }
if(!user.id) {
  let n = user.name.replace(/[^a-zA-Z]/g,'').slice(0,4).toUpperCase();
  let p = user.phone.slice(-4);
  user.id = n + p;
  saveUser();
}
function saveUser(){
  users = users.map(u=>u.phone===user.phone?user:u);
  localStorage.setItem('raj_users', JSON.stringify(users));
}
const profilePic = document.getElementById('profilePic');
if(user.profile) profilePic.src = user.profile;
document.getElementById('profileUpload').onchange = function(e){
  const file = e.target.files[0];
  if(file){
    const reader = new FileReader();
    reader.onload = function(ev){
      user.profile = ev.target.result;
      profilePic.src = user.profile;
      // Save as file: assets/customer/profile/CustomerID
      saveUser();
    };
    reader.readAsDataURL(file);
  }
};
updateSwatch();
document.getElementById('cName').textContent = user.name;
document.getElementById('cPhone').textContent = user.phone;
document.getElementById('cEmail').textContent = user.email;
document.getElementById('cJoin').textContent = user.joinDate;
document.getElementById('cID').textContent = "Customer ID: "+user.id;

/* ------ Side Menu Logic -------- */
const menuBtn = document.getElementById('menu-btn');
const sideMenu = document.getElementById('side-menu');
const backdrop = document.getElementById('side-menu-backdrop');
menuBtn.onclick = function() {
  sideMenu.classList.add('active');
  backdrop.classList.add('active');
}
backdrop.onclick = function() {
  sideMenu.classList.remove('active');
  backdrop.classList.remove('active');
}
function logout() {
  localStorage.removeItem('raj_loggedin');
  window.location.href = "login.html";
}

/* ------ Lower Menu and Pages -------- */
function openPage(page) {
  if(page==="order") { openOrderModal(); }
  else if(page==="price") { openPriceModal(); }
  else if(page==="myorder") { window.location.href="estimate.html#myorder"; }
  else if(page==="payment") { window.location.href="estimate.html#payment"; }
  else if(page==="orderstatus") { window.location.href="estimate.html#orderstatus"; }
}

/* ------ Order Now Modal -------- */
function openOrderModal() {
  let html = `<h3>Order Now</h3>
    <form id="orderForm">
      <label>Customer ID</label>
      <input type="text" value="${user.id}" readonly>
      <label>Name</label>
      <input type="text" value="${user.name}" readonly>
      <label>Type of Net *</label>
      <select name="type" required>
        <option value="">Select...</option>
        <option value="Fiberglass Net">Fiberglass Net</option>
        <option value="Aluminum Frame Net">Aluminum Frame Net</option>
        <option value="Velcro Net">Velcro Net</option>
        <option value="Door Net">Door Net</option>
        <option value="Magnetic Mesh">Magnetic Mesh</option>
        <option value="Roll-up Net">Roll-up Net</option>
        <option value="Other/Custom">Other/Custom</option>
      </select>
      <button type="submit">Submit</button>
      <div id="orderMsg" class="modal-success"></div>
    </form>`;
  showModal(html);
  document.getElementById('orderForm').onsubmit = function(e){
    e.preventDefault();
    const netType = this.type.value;
    if(!netType) {
      document.getElementById('orderMsg').textContent = "Please select a net type.";
      document.getElementById('orderMsg').className = "modal-error";
      return;
    }
    const apptDate = new Date();
    apptDate.setDate(apptDate.getDate()+2);
    let yyyy = apptDate.getFullYear(), mm = (apptDate.getMonth()+1).toString().padStart(2,0), dd = apptDate.getDate().toString().padStart(2,0);
    let apptStr = `${yyyy}-${mm}-${dd}`;
    document.getElementById('orderMsg').innerHTML = `Thank you <b>${user.name}</b>!<br>Your order for <b>${netType}</b> is received.<br>
    Appointment Date: <b>${apptStr}</b> (9:00am-11:00am)<br>
    Our executive officer will call and visit you for confirmation.`;
    document.getElementById('orderMsg').className = "modal-success";
    this.querySelector('button[type=submit]').disabled = true;
  }
}

/* ------ Price Check Modal -------- */
function openPriceModal() {
  let html = `<h3>Price Check</h3>
    <form id="priceForm">
      <label>Customer ID</label>
      <input type="text" value="${user.id}" readonly>
      <label>Width</label>
      <input type="number" id="widthInput" name="width" min="1" max="500" placeholder="in inches" required>
      <label>Height</label>
      <input type="number" id="heightInput" name="height" min="1" max="500" placeholder="in inches" required>
      <label>Qty</label>
      <input type="number" id="qtyInput" name="qty" min="1" max="50" required>
      <div style="font-size:0.93em;color:#fff; margin-bottom:0.5em;">
        <input type="radio" name="unit" value="inch" id="unitInch" checked> <label for="unitInch" style="display:inline;color:#fff;">Inches</label>
        <input type="radio" name="unit" value="cm" id="unitCm"> <label for="unitCm" style="display:inline;color:#fff;">Centimetres</label>
        <span style="color:#ffd600"> (Below 24inches/61cm considered 2ft)</span>
      </div>
      <button type="button" onclick="calculatePrice()">Calculate</button>
      <div id="calcMsg" style="margin-top:0.7em;"></div>
    </form>`;
  showModal(html);
}
/* Price calculation */
function calculatePrice() {
  let w = +document.getElementById('widthInput').value;
  let h = +document.getElementById('heightInput').value;
  let qty = +document.getElementById('qtyInput').value;
  let unit = document.querySelector('input[name="unit"]:checked').value;
  if(unit==='cm') { w = w/2.54; h = h/2.54; }
  if(w<24) w=24;
  if(h<24) h=24;
  let sqft = ((w*h)/144)*qty;
  let price = Math.round(sqft * 135); // Demo price logic per sqft
  document.getElementById('calcMsg').innerHTML =
    `<span class="modal-gold">Total Sqft: ${sqft.toFixed(2)}</span><br>
    <span class="modal-silver">Total Price: ₹${price}</span>`;
}
  /* ------ Payment Modal for Card -------- */
function showPayment(type) {
  let title = type==="gold"?"Gold":"";
  if(type==="silver") title="Silver";
  if(type==="bronze") title="Bronze";
  let amt = type==="gold"?1000:type==="silver"?500:250;
  let html = `<h3>${title} Membership Payment</h3>
    <div style="font-size:1.15em;margin-bottom:1em;">
      Amount: <b>₹${amt}</b>
    </div>
    <div style="color:#cbe7fa;margin-bottom:1em;">
      Pay & enjoy exclusive <b>${title}</b> benefits!
    </div>
    <button type="button" onclick="paymentSuccess('${title}')">Pay Now</button>
    <div id="paymentMsg" class="modal-success"></div>`;
  showModal(html);
}
function paymentSuccess(title){
  document.getElementById('paymentMsg').textContent = `Payment for ${title} Membership Successful! Thank you.`;
}

/* ------ Modal Logic -------- */
function showModal(html) {
  document.getElementById('modalBox').innerHTML = html;
  document.getElementById('modal-bg').classList.add('active');
}
function closeModal() {
  document.getElementById('modal-bg').classList.remove('active');
}

/* ------ Slider Logic -------- */
const promoSlider = document.getElementById('promo-slider');
let current = 0, slides = promoSlider.children, len = slides.length;
function autoSlide() {
  for(let i=0;i<len;i++) slides[i].style.opacity = '0.4';
  slides[current].scrollIntoView({behavior:'smooth',inline:'center'});
  slides[current].style.opacity = '1';
  current = (current+1)%len;
  setTimeout(autoSlide, 2100);
}
setTimeout(autoSlide, 1200);
</script>
</body>
</html>
